# MVP 构建任务分布计划

本计划将 A股量化交易系统的 **MVP** 拆解为最小单元任务。  
每个任务都独立、可测试、有明确的输入与输出，并且按照实现顺序排序。

---

## 阶段 1：核心框架搭建

### 任务 1：初始化项目结构
- **目标**：建立 `quant-trading-system/` 基础文件夹结构（backend、frontend、config、tests、docs）。
- **验证**：目录存在，能通过 `CMake` 编译空项目。

### 任务 2：实现日志模块 (`logger.h/.cpp`)
- **目标**：支持不同级别日志（INFO、WARN、ERROR），输出到控制台和文件。
- **验证**：写入一条日志，检查文件与终端是否一致。

### 任务 3：实现事件循环 (`event_loop.h/.cpp`)
- **目标**：支持注册定时任务与事件回调。
- **验证**：注册一个 1s 定时器，打印日志，运行 5s 后停止。

### 任务 4：实现消息总线 (`message_bus.h/.cpp`)
- **目标**：支持模块间事件发布与订阅。
- **验证**：A 模块发布一条消息，B 模块接收并打印。

---

## 阶段 2：数据接入

### 任务 5：实现 CSV 加载器 (`csv_loader.h/.cpp`)
- **目标**：从 CSV 文件读取 OHLCV 数据，返回标准化结构。
- **验证**：加载示例 CSV，输出第一条 K线。

### 任务 6：实现行情数据接口抽象 (`data_adapter.h`)
- **目标**：定义统一接口 `subscribe(symbol)` 与 `on_tick(data)`。
- **验证**：实现一个 MockDataAdapter，能推送测试数据。

### 任务 7：集成行情流 (`market_data_feed.h/.cpp`)
- **目标**：接入 Mock 行情 → 通过事件循环分发 → 日志输出。
- **验证**：订阅 1 支股票，模拟推送 10 条数据。

---

## 阶段 3：策略引擎

### 任务 8：实现策略基类 (`strategy_base.h/.cpp`)
- **目标**：定义 `on_bar(data)` 与 `generate_signal()`。
- **验证**：编写 DummyStrategy，固定返回 BUY。

### 任务 9：实现简单 MA 策略 (`ma_rsi_strategy.h/.cpp`)
- **目标**：基于 5/10 均线交叉生成信号。
- **验证**：输入 20 条测试数据，输出 BUY/SELL 信号。

### 任务 10：支持多周期联动
- **目标**：同一标的同时处理 1s/1min K线。
- **验证**：模拟推送两种周期，策略能处理。

---

## 阶段 4：执行与风控

### 任务 11：实现订单管理器 (`order_manager.h/.cpp`)
- **目标**：接收信号，生成订单对象。
- **验证**：策略发出 BUY 信号，生成订单 JSON 并打印。

### 任务 12：实现风控检查 (`risk_manager.h/.cpp`)
- **目标**：检查 ST 股票、单笔上限、回撤限制。
- **验证**：输入违规订单，返回拒单日志。

### 任务 13：实现东北证券模拟适配器 (`dongbei_sec_adapter.h/.cpp`)
- **目标**：接收订单并生成模拟成交回报。
- **验证**：下单 100 股，返回成交确认。

---

## 阶段 5：资金与持仓管理

### 任务 14：实现持仓管理器 (`portfolio_manager.h/.cpp`)
- **目标**：记录持仓、资金、均价。
- **验证**：买入 100 股，资金减少，持仓增加。

### 任务 15：实现资金分配器 (`allocator.h/.cpp`)
- **目标**：基于波动率目标分配仓位。
- **验证**：输入波动率 20%，分配仓位比例。

---

## 阶段 6：报表与告警

### 任务 16：实现交易日志 (`trade_log.h/.cpp`)
- **目标**：记录每笔交易至 CSV。  
- **验证**：下单 → 日志文件增加一行。

### 任务 17：实现日报生成 (`report_generator.h/.cpp`)
- **目标**：每日生成交易汇总 CSV。  
- **验证**：交易一天 → 生成日报文件。

### 任务 18：实现告警服务 (`alert_service.h/.cpp`)
- **目标**：触发桌面弹窗、声音（本地）、邮件（Mock）。  
- **验证**：模拟风控触发 → 弹出日志提示。

---

## 阶段 7：前端 MVP

### 任务 19：搭建 React 前端框架
- **目标**：启动最小 React 项目（深色主题）。  
- **验证**：浏览器打开显示 "Quant Trading Dashboard"。

### 任务 20：实现 WebSocket 服务（后端）
- **目标**：后端推送行情到前端。  
- **验证**：前端实时显示订阅股票价格。

### 任务 21：实现持仓/资金可视化
- **目标**：前端表格展示持仓与资金。  
- **验证**：买入后，前端数据更新。

---

## 阶段 8：回测与仿真

### 任务 22：实现回测引擎（Tick级）
- **目标**：加载 CSV，驱动策略 → 执行 → 生成日志。  
- **验证**：跑一个 MA 策略回测，输出交易结果。

### 任务 23：实现仿真模式切换
- **目标**：支持在 `config.yaml` 中选择 `mode: backtest|paper|live`。  
- **验证**：切换模式 → 系统执行对应流程。

---

## 阶段 9：收尾与交付

### 任务 24：配置管理 (`config_manager.h/.cpp`)
- **目标**：加载 `default.yaml`、`strategies.yaml`、`risk.yaml`。  
- **验证**：修改配置 → 程序读取并生效。

### 任务 25：打包与部署
- **目标**：Windows/Linux 编译运行，前后端可交互。  
- **验证**：双系统运行 Demo 策略，产生日报。

---

## 总结

MVP 最终目标：  
1. 可接收行情（模拟/CSV）。  
2. 策略发出信号 → 风控校验 → 执行交易。  
3. 持仓资金更新，生成报表。  
4. Web 前端实时展示行情、持仓与信号。  
5. 支持回测与仿真切换。  
